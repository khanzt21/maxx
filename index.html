<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∏–∑–∞–π–Ω—É –ø–∞–º'—è—Ç–Ω–∏–∫—ñ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.2em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            padding: 40px;
        }

        .input-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .output-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 16px;
        }

        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s ease;
            resize: vertical;
            min-height: 150px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.5;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 15px;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 15px 25px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .example-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            padding: 12px 25px;
            font-size: 15px;
            margin-bottom: 20px;
        }

        .image-container {
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #ffffff;
            border: 3px dashed #e9ecef;
            border-radius: 15px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .generated-image {
            max-width: 100%;
            max-height: 500px;
            border-radius: 10px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        .placeholder {
            color: #6c757d;
            font-size: 1.3em;
            text-align: center;
            padding: 30px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }

        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-text {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .progress-detail {
            color: #6c757d;
            font-size: 15px;
        }

        .error {
            color: #e74c3c;
            background: #fdf2f2;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            border-left: 4px solid #e74c3c;
        }

        .success {
            color: #27ae60;
            background: #f0fff4;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            border-left: 4px solid #27ae60;
        }

        .download-btn {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 15px;
            text-decoration: none;
            display: none;
            text-align: center;
        }

        .tips {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #2196f3;
        }

        .tips h4 {
            color: #1565c0;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .tips ul {
            color: #1976d2;
            margin-left: 20px;
            line-height: 1.6;
        }

        .tips li {
            margin-bottom: 5px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .main-content {
                padding: 20px;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .input-section, .output-section {
                padding: 20px;
            }
            
            .header {
                padding: 25px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèõÔ∏è –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∏–∑–∞–π–Ω—É –ø–∞–º'—è—Ç–Ω–∏–∫—ñ–≤</h1>
            <p>–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–∏–∑–∞–π–Ω—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É</p>
        </div>

        <div class="main-content">
            <div class="input-section">
                <h2>üìù –û–ø–∏—Å –ø–∞–º'—è—Ç–Ω–∏–∫–∞</h2>
                
                <button class="btn example-btn" onclick="insertExample()">
                    üìã –í—Å—Ç–∞–≤–∏—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥ –æ–ø–∏—Å—É
                </button>
                
                <div class="form-group">
                    <label for="description">–î–µ—Ç–∞–ª—å–Ω–∏–π —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π –æ–ø–∏—Å –ø–∞–º'—è—Ç–Ω–∏–∫–∞:</label>
                    <textarea id="description" placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–æ–≤–Ω–∏–π –æ–ø–∏—Å –ø–∞–º'—è—Ç–Ω–∏–∫–∞ –∑ —Ä–æ–∑–º—ñ—Ä–∞–º–∏, –º–∞—Ç–µ—Ä—ñ–∞–ª–∞–º–∏, —Ö—É–¥–æ–∂–Ω—å–æ—é —Ä–æ–±–æ—Ç–æ—é —Ç–∞ —ñ–Ω—à–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏..."></textarea>
                </div>

                <button class="btn" onclick="generateMonument()">
                    üé® –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∏–∑–∞–π–Ω –ø–∞–º'—è—Ç–Ω–∏–∫–∞
                </button>

                <div id="error-message" class="error"></div>
                <div id="success-message" class="success"></div>

                <div class="tips">
                    <h4>üí° –î–ª—è –∫—Ä–∞—â–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤–∫–∞–∂—ñ—Ç—å:</h4>
                    <ul>
                        <li>–¢–æ—á–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ —Å—Ç–µ–ª–∏, —Ç—É–º–±–∏ —Ç–∞ –∫–≤—ñ—Ç–Ω–∏–∫–∞</li>
                        <li>–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ (–≥—Ä–∞–Ω—ñ—Ç, –º–∞—Ä–º—É—Ä, –±—Ä–æ–Ω–∑–∞)</li>
                        <li>–¢–∏–ø –ø–∞–º'—è—Ç–Ω–∏–∫–∞ —Ç–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω</li>
                        <li>–•—É–¥–æ–∂–Ω—é —Ä–æ–±–æ—Ç—É —Ç–∞ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏</li>
                        <li>–î–µ—Ç–∞–ª—ñ –æ–±–ª–∏—Ü—é–≤–∞–Ω–Ω—è —Ç–∞ –æ–±—Ä–æ–±–∫–∏</li>
                        <li>–î–æ–¥–∞—Ç–∫–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ (–≤—ñ–Ω–∫–∏, –≥—Ä–∞–≤—ñ—Ä—É–≤–∞–Ω–Ω—è)</li>
                    </ul>
                </div>
            </div>

            <div class="output-section">
                <h2>üéØ –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –¥–∏–∑–∞–π–Ω</h2>
                
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <div class="progress-text" id="progress-text">–°—Ç–≤–æ—Ä—é—é –¥–∏–∑–∞–π–Ω...</div>
                    <div class="progress-detail" id="progress-detail">–û–±—Ä–æ–±–ª—è—é –æ–ø–∏—Å —Ç–∞ –≥–µ–Ω–µ—Ä—É—é –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</div>
                </div>

                <div class="image-container" id="image-container">
                    <div class="placeholder">
                        üèõÔ∏è –¢—É—Ç –∑'—è–≤–∏—Ç—å—Å—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –¥–∏–∑–∞–π–Ω –≤–∞—à–æ–≥–æ –ø–∞–º'—è—Ç–Ω–∏–∫–∞
                    </div>
                </div>

                <a href="#" id="download-btn" class="download-btn">
                    üíæ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                </a>
            </div>
        </div>
    </div>

    <script>
        function insertExample() {
            const example = `–†–æ–∑–º—ñ—Ä —Å—Ç–µ–ª–∏: 120 —Ö 60 —Ö 8 —Å–º
–ú–∞—Ç–µ—Ä—ñ–∞–ª: –±—É–∫—ñ–Ω—Å—å–∫–∏–π –≥—Ä–∞–Ω—ñ—Ç
–û–±–ª–∏—Ü—é–≤–∞–Ω–Ω—è –≤–µ—Ä—Ö: —Å—ñ—Ä–∏–π –≥—Ä–∞–Ω—ñ—Ç –∫–ª–∞—Å–∏—á–Ω–∏–π
–û–±–ª–∏—Ü—é–≤–∞–Ω–Ω—è –±–æ–∫–∞: –≥—Ä–µ—Å –ø—ñ–¥ –ø–æ–∫–æ—Å—Ç—É
–¢–∏–ø –ø–∞–º'—è—Ç–Ω–∏–∫–∞: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–π 1 —Å—Ç–æ—Ä–æ–Ω–∞

–†–æ–∑–º—ñ—Ä —Ç—É–º–±–∏: 70 —Ö 20 —Ö 15 —Å–º
–†–æ–∑–º—ñ—Ä –∫–≤—ñ—Ç–Ω–∏–∫–∞: 120 —Ö 70 —Å–º (3 –ø–æ—Ä—É—á–Ω—ñ)

–î—Ä—ñ–±–Ω—ñ –¥–µ—Ç–∞–ª—ñ: –ù–∞–¥–≥—Ä–æ–±–Ω–∞ —Ö–≤–∏–ª—å–∫–∞ –∑ –ø–ª–∏—Ç–∏ (—à–∏—Ä–æ–∫–∞) —Å—ñ—Ä–∞, —Ä–æ–∑–º—ñ—Ä–æ–º 61 —Ö 55 —Å–º
–•—É–¥–æ–∂–Ω—è —Ä–æ–±–æ—Ç–∞: 1 —Å—Ç–æ—Ä–æ–Ω–∞ 1 —Ñ–æ—Ç–æ –ø–æ—Ä—Ç—Ä–µ—Ç
–î–æ–¥–∞—Ç–∫–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏: –ë—Ä–æ–Ω–∑–æ–≤–∏–π –≤—ñ–Ω–æ–∫, –≥—Ä–∞–≤—ñ—Ä—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É "–í—ñ—á–Ω–∞ –ø–∞–º'—è—Ç—å"

–°—Ç–∏–ª—å: –ö–ª–∞—Å–∏—á–Ω–∏–π —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –º–µ–º–æ—Ä—ñ–∞–ª—å–Ω–∏–π –ø–∞–º'—è—Ç–Ω–∏–∫
–û–±—Ä–æ–±–∫–∞: –ü–æ–ª—ñ—Ä–æ–≤–∫–∞ –ª–∏—Ü—å–æ–≤–æ—ó —á–∞—Å—Ç–∏–Ω–∏, —Ñ–∞–∫—Ç—É—Ä–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –±–æ–∫–æ–≤–∏—Ö —Å—Ç–æ—Ä—ñ–Ω`;
            
            document.getElementById('description').value = example;
        }

        function updateProgress(text, detail) {
            document.getElementById('progress-text').textContent = text;
            document.getElementById('progress-detail').textContent = detail;
        }

        async function makeAPICall(url, options = {}) {
            try {
                console.log(`Calling: ${url}`);
                const response = await fetch(url, options);
                const text = await response.text();
                
                console.log(`Response status: ${response.status}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${text}`);
                }
                
                try {
                    return JSON.parse(text);
                } catch (parseError) {
                    throw new Error(`–ù–µ–≤—ñ—Ä–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —Å–µ—Ä–≤–µ—Ä–∞: ${text.substring(0, 100)}...`);
                }
                
            } catch (error) {
                console.error(`API Error (${url}):`, error);
                throw error;
            }
        }

        async function generatePrompt(description) {
            updateProgress('–°—Ç–≤–æ—Ä—é—é –ø—Ä–æ–º–ø—Ç...', '–ê–Ω–∞–ª—ñ–∑—É—é –æ–ø–∏—Å —á–µ—Ä–µ–∑ ChatGPT');
            
            return await makeAPICall('/api/generate-prompt', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ description })
            });
        }

        async function generateImage(prompt) {
            updateProgress('–ì–µ–Ω–µ—Ä—É—é –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è...', '–°—Ç–≤–æ—Ä—é—é –¥–∏–∑–∞–π–Ω —á–µ—Ä–µ–∑ DALL-E 3');
            
            return await makeAPICall('/api/generate-image', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt })
            });
        }

        function displayImage(imageUrl) {
            const container = document.getElementById('image-container');
            container.innerHTML = `<img src="${imageUrl}" alt="–ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –¥–∏–∑–∞–π–Ω –ø–∞–º'—è—Ç–Ω–∏–∫–∞" class="generated-image">`;
            
            const downloadBtn = document.getElementById('download-btn');
            downloadBtn.href = imageUrl;
            downloadBtn.download = 'monument-design.jpg';
            downloadBtn.style.display = 'inline-block';
        }

        function showError(message) {
            const errorElement = document.getElementById('error-message');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
            setTimeout(() => errorElement.style.display = 'none', 8000);
        }

        function showSuccess(message) {
            const successElement = document.getElementById('success-message');
            successElement.textContent = message;
            successElement.style.display = 'block';
            setTimeout(() => successElement.style.display = 'none', 4000);
        }

        async function generateMonument() {
            const description = document.getElementById('description').value.trim();

            if (!description) {
                showError('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –æ–ø–∏—Å –ø–∞–º\'—è—Ç–Ω–∏–∫–∞');
                return;
            }

            const loadingElement = document.getElementById('loading');
            const generateBtn = document.querySelector('.btn:not(.example-btn)');

            try {
                loadingElement.style.display = 'block';
                generateBtn.disabled = true;
                
                document.getElementById('download-btn').style.display = 'none';
                document.getElementById('image-container').innerHTML = '<div class="placeholder">üèõÔ∏è –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –¥–∏–∑–∞–π–Ω...</div>';
                
                // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ–º–ø—Ç–∞
                const promptResult = await generatePrompt(description);
                
                // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                const imageResult = await generateImage(promptResult.prompt);
                
                if (!imageResult.imageUrl) {
                    throw new Error('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è');
                }
                
                updateProgress('–ì–æ—Ç–æ–≤–æ!', '–î–∏–∑–∞–π–Ω —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ');
                displayImage(imageResult.imageUrl);
                
                showSuccess('–î–∏–∑–∞–π–Ω –ø–∞–º\'—è—Ç–Ω–∏–∫–∞ —É—Å–ø—ñ—à–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ! üéâ');
                
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:', error);
                showError(`–ü–æ–º–∏–ª–∫–∞: ${error.message}`);
                document.getElementById('image-container').innerHTML = '<div class="placeholder">‚ùå –ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó</div>';
            } finally {
                loadingElement.style.display = 'none';
                generateBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
